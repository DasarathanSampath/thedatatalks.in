(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{490:function(t,e,s){},491:function(t,e,s){},602:function(t,e,s){"use strict";s(490)},603:function(t,e,s){"use strict";s(491)},608:function(t,e,s){"use strict";s.r(e);s(342);var a=s(36),i=(s(17),s(101),s(48),s(50),s(9),s(194),s(178),s(20),s(26),s(35)),n={props:{post:{type:Object,validator:function(t){var e="string"==typeof t[".key"],s="string"==typeof t.text,a=e&&s;return s||console.error(" The post prope object must include a 'text' attribute."),e||console.error(" The post prope object must include a '.key' attribute."),a}}},data:function(){return{text:this.post?this.post.text:""}},computed:Object(a.a)(Object(a.a)({},Object(i.b)({authId:"authId"})),{},{isUpdate:function(){return!!this.post}}),methods:{save:function(){var t=this;this.persist().then((function(e){t.$emit("save",{post:e})}))},cancel:function(){this.$emit("cancel")},create:function(){var t={text:this.text,articleId:this.$frontmatter.id,lncode:this.$lang};return this.text="",this.$store.dispatch("createPost",t)},update:function(){var t={id:this.post[".key"],text:this.text,lncode:this.post.lncode};return this.$store.dispatch("updatePost",t)},persist:function(){return this.isUpdate?this.update():this.create()}}},o=s(47),r=Object(o.a)(n,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("form",{on:{submit:function(e){return e.preventDefault(),t.save(e)}}},[s("div",{staticClass:"form-group"},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.text,expression:"text"}],staticClass:"form-input",attrs:{name:"",id:"",cols:"30",rows:"10"},domProps:{value:t.text},on:{input:function(e){e.target.composing||(t.text=e.target.value)}}})]),t._v(" "),s("div",{staticClass:"form-action"},[t.isUpdate?s("button",{on:{click:function(e){return e.preventDefault(),t.cancel(e)}}},[t._v("Cancel")]):t._e(),t._v(" "),s("button",{staticClass:"button-blue"},[t._v(t._s(t.isUpdate?"Update":"Submit Post"))])])])}),[],!1,null,null,null).exports,l={props:{post:{required:!0,type:Object}},data:function(){return{editing:!1,user:null,userPostsCount:null}},components:{PostEditor:r},computed:Object(a.a)({},Object(i.b)({authId:"authId"})),methods:{fetchData:function(){var t=this;firebase.database().ref("users").child(this.post.userId).once("value",(function(e){t.user=e.val(),t.userPostsCount=Object.keys(t.user[t.$lang]).length}))}},watch:{$route:function(){this.fetchData()}},mounted:function(){this.fetchData()}},u=(s(602),{components:{PostListItem:Object(o.a)(l,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.post&&t.user?s("div",{staticClass:"post"},[s("div",{staticClass:"row"},[s("div",{staticClass:"user-info"},[s("a",{attrs:{href:"#"}},[t._v(t._s(t.user.username))]),t._v(" "),s("p",[t._v(" "+t._s(t.userPostsCount)+" posts ")])]),t._v(" "),s("div",{staticClass:"post-content"},[t.editing?s("div",[s("PostEditor",{attrs:{post:t.post,authId:t.authId},on:{save:function(e){t.editing=!1},cancel:function(e){t.editing=!1}}})],1):[s("div",[t._v("\n                    "+t._s(t.post.text)+"\n                ")]),t._v(" "),t.authId?s("div",[t.authId==t.post.userId?s("a",{staticClass:"link-unstyled",staticStyle:{"margin-left":"auto"},attrs:{href:"#",title:"Make a change"},on:{click:function(e){e.preventDefault(),t.editing=!0}}},[s("i",{staticClass:"fa fa-pencil"})]):t._e()]):t._e()]],2),t._v(" "),s("div",{staticClass:"post-date"},[t.post.edited?s("div",{staticClass:"edition-info"},[t._v("edited")]):t._e(),t._v(" "),s("AppDate",{attrs:{timeStamp:t.post.publishedAt}})],1)])]):t._e()}),[],!1,null,null,null).exports},props:{posts:{required:!0,type:Array}}}),c=(s(603),{components:{PostList:Object(o.a)(u,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"post-list"},this._l(this.posts,(function(t){return e("PostListItem",{attrs:{post:t}})})),1)}),[],!1,null,null,null).exports,PostEditor:r},props:{},data:function(){return{asyncDataStatus_ready:!1}},computed:Object(a.a)(Object(a.a)({},Object(i.b)({authId:"authId"})),{},{article:function(){return this.$store.state.articles[this.$lang][this.$frontmatter.id]?this.$store.state.articles[this.$lang][this.$frontmatter.id]:null},posts:function(){if(null!==this.article&&void 0!==this.article.posts){var t=Object.values(this.article.posts);return Object.values(this.$store.state.posts[this.$lang]).filter((function(e){return t.includes(e[".key"])}))}return null}}),methods:{fetchData:function(){var t=this;this.$store.dispatch("fetchArticle",{lnCode:this.$lang,articleId:this.$frontmatter.id}).then((function(e){return null!==e&&void 0!==e.posts?t.$store.dispatch("fetchPosts",{ids:Object.keys(e.posts),lnCode:e.lncode}):null})).then((function(e){return null!==e?Promise.all(e.map((function(e){t.$store.dispatch("fetchUser",{userId:e.userId})}))):null})).then((function(){t.asyncDataStatus_fetched()}))},asyncDataStatus_fetched:function(){this.asyncDataStatus_ready=!0,this.$emit("ready")}},watch:{$route:function(){this.fetchData()}},mounted:function(){this.fetchData()}}),d=Object(o.a)(c,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",[this.posts?e("div",[e("PostList",{attrs:{posts:this.posts}})],1):this._e(),this._v(" "),this.authId?e("PostEditor"):this._e()],1)}),[],!1,null,null,null).exports,p=(s(169),{components:{ArticlePosts:d},data:function(){return{email:"",password:"",username:"",emailSignIn:"",passwordSignIn:"",photoURL:null,newPassword:null,displayName:null,asyncDataStatus_ready:!1,profileFormDisplay:"block",passwordFormDisplay:"block",emailFormDisplay:"block",isLinkedGoogle:"",isLinkedPassword:""}},computed:Object(a.a)(Object(a.a)({},Object(i.b)({authId:"authId",authUser:"authUser"})),{},{linkedGoogle:function(){return this.isLinkedGoogle=!!this.authUser.providerData.find((function(t){return"google.com"===t.providerId})),this.isLinkedGoogle},linkedPassword:function(){return this.isLinkedPassword=!!this.authUser.providerData.find((function(t){return"password"===t.providerId})),this.isLinkedPassword},authUserId:function(){return this.authUser?this.authUser.uid:null}}),methods:{register:function(){this.$store.dispatch("registerUserWithEmailAndPassword",{email:this.email,password:this.password,username:this.username}).catch((function(t){alert("We have an error"+t.message)}))},signOut:function(){var t=this;this.$store.dispatch("signOut").then((function(){t.email=null,t.password=null,t.photoURL=null,t.passwordSignIn=null,t.photoURLSignIn=null}))},signIn:function(){this.$store.dispatch("signInWithEmailAndPassword",{email:this.emailSignIn,password:this.passwordSignIn}).catch((function(t){alert("We have an error"+t.message)}))},signInWithGoogle:function(){this.$store.dispatch("signInWithGoogle").catch((function(t){alert("We have an error"+t.message)}))},linkGoogle:function(){var t=this,e=new firebase.auth.GoogleAuthProvider;this.authUser.linkWithPopup(e).catch((function(t){return alert(t.message)})).then((function(){t.isLinkedGoogle=!0,t.$router.push(t.$route.path),alert("Account linked with Google account")}))},unLinkGoogle:function(){var t=this;this.authUser.unlink("google.com").then((function(){t.isLinkedGoogle=!1,t.$router.push(t.$route.path),alert("Account un-linked from Google account")}))},updateProfile:function(){var t=this;this.authUser.updateProfile({displayName:this.displayName,photoURL:this.photoURL}).then((function(){t.openProfileForm(),t.displayName=null,t.photoURL=null}))},updateEmail:function(){var t=this;this.authUser.updateEmail(this.email).then((function(){t.openEmailForm(),t.email=null}))},updatePassword:function(){var t=this;this.authUser.updatePassword(this.newPassword).catch((function(t){return alert(t.message)})).then((function(){t.openPasswordForm(),t.newPassword=null}))},openProfileForm:function(){document.getElementById("update-profile").style.display=this.profileFormDisplay,"none"===this.profileFormDisplay?this.profileFormDisplay="block":this.profileFormDisplay="none"},openEmailForm:function(){document.getElementById("update-email").style.display=this.emailFormDisplay,"none"===this.emailFormDisplay?this.emailFormDisplay="block":this.emailFormDisplay="none"},openPasswordForm:function(){document.getElementById("update-password").style.display=this.passwordFormDisplay,"none"===this.passwordFormDisplay?this.passwordFormDisplay="block":this.passwordFormDisplay="none"},asyncDataStatus_fetched:function(){this.asyncDataStatus_ready=!0,this.$emit("ready")}},mounted:function(){var t=this;this.$store.dispatch("initAuthentication").then((function(){return t.asyncDataStatus_fetched()}))}}),h=Object(o.a)(p,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[t.authUser?s("div",[s("div",{staticClass:"user-loggedin"},[s("img",{staticStyle:{float:"left"},attrs:{src:t.authUser.photoURL,height:"50"}}),t._v(" "),s("h3",{staticStyle:{display:"inline-block"}},[t._v(" \n                Signed in as "+t._s(t.authUser.email)+" \n                "),t.isLinkedGoogle?s("img",{attrs:{src:"https://www.gstatic.com/mobilesdk/160512_mobilesdk/auth_service_google.svg",alt:""}}):t._e(),t._v(" "),t.linkedPassword?s("img",{attrs:{src:"https://www.gstatic.com/mobilesdk/160409_mobilesdk/images/auth_service_email.svg",alt:""}}):t._e()]),t._v(" "),s("h3",{staticStyle:{float:"right",display:"inline-block"}},[t._v(t._s(t.authUser.displayName))])]),t._v(" "),s("div",{staticStyle:{margin:"1rem 1rem 1rem 1rem"}},[s("button",{staticClass:"button-blue",on:{click:t.signOut}},[t._v("signOut")]),t._v(" "),t.isLinkedGoogle?s("button",{staticClass:"button-blue",on:{click:t.unLinkGoogle}},[t._v("unLink with Google")]):s("button",{staticClass:"button-blue",on:{click:t.linkGoogle}},[t._v("Link with Google")]),t._v(" "),s("button",{staticClass:"button-blue",on:{click:t.openProfileForm}},[t._v("Update Profile")]),t._v(" "),s("button",{staticClass:"button-blue",on:{click:t.openEmailForm}},[t._v("Update Email")]),t._v(" "),s("button",{staticClass:"button-blue",on:{click:t.openPasswordForm}},[t._v("Update Password")])]),t._v(" "),s("div",{staticStyle:{display:"none",padding:"0 0 0 1rem"},attrs:{id:"update-profile"}},[s("form",{on:{submit:function(e){return e.preventDefault(),t.updateProfile(e)}}},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.displayName,expression:"displayName"}],staticStyle:{display:"block"},attrs:{placeholder:"Your Name"},domProps:{value:t.displayName},on:{input:function(e){e.target.composing||(t.displayName=e.target.value)}}}),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.photoURL,expression:"photoURL"}],staticStyle:{display:"block"},attrs:{placeholder:"Your photo url"},domProps:{value:t.photoURL},on:{input:function(e){e.target.composing||(t.photoURL=e.target.value)}}}),t._v(" "),s("button",{staticStyle:{display:"block"}},[t._v("Update Profile")])])]),t._v(" "),s("div",{staticStyle:{display:"none",padding:"0 0 0 1rem"},attrs:{id:"update-email"}},[s("form",{on:{submit:function(e){return e.preventDefault(),t.updateEmail(e)}}},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],staticStyle:{display:"block"},attrs:{placeholder:"Your Email"},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}}),t._v(" "),s("button",[t._v("Update Email")])])]),t._v(" "),s("div",{staticStyle:{display:"none",padding:"0 0 0 1rem"},attrs:{id:"update-password"}},[s("form",{on:{submit:function(e){return e.preventDefault(),t.updatePassword(e)}}},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.newPassword,expression:"newPassword"}],staticStyle:{display:"block"},attrs:{type:"password",placeholder:"New Password"},domProps:{value:t.newPassword},on:{input:function(e){e.target.composing||(t.newPassword=e.target.value)}}}),t._v(" "),s("button",[t._v("Update Password")])])])]):s("div",[s("form",{staticStyle:{float:"left",padding:"0 2rem 0 0"},on:{submit:function(e){return e.preventDefault(),t.register(e)}}},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],staticStyle:{display:"block"},attrs:{type:"email",placeholder:"Email"},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}}),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.username,expression:"username"}],staticStyle:{display:"block"},attrs:{type:"username",placeholder:"User Name"},domProps:{value:t.username},on:{input:function(e){e.target.composing||(t.username=e.target.value)}}}),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticStyle:{display:"block"},attrs:{type:"password",placeholder:"Password"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}}),t._v(" "),s("button",{staticClass:"button-blue"},[t._v("Register")])]),t._v(" "),s("form",{on:{submit:function(e){return e.preventDefault(),t.signIn(e)}}},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.emailSignIn,expression:"emailSignIn"}],staticStyle:{display:"block"},attrs:{type:"email",placeholder:"Email"},domProps:{value:t.emailSignIn},on:{input:function(e){e.target.composing||(t.emailSignIn=e.target.value)}}}),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.passwordSignIn,expression:"passwordSignIn"}],staticStyle:{display:"block"},attrs:{type:"password",placeholder:"Password"},domProps:{value:t.passwordSignIn},on:{input:function(e){e.target.composing||(t.passwordSignIn=e.target.value)}}}),t._v(" "),s("button",{staticClass:"button-blue"},[t._v("SignIn")])]),t._v(" "),s("button",{staticClass:"button-blue",staticStyle:{"background-color":"#074502","font-weight":"600"},on:{click:t.signInWithGoogle}},[t._v("SignIn with Google")])]),t._v(" "),t.asyncDataStatus_ready?s("ArticlePosts"):t._e()],1)}),[],!1,null,null,null).exports;firebase.initializeApp({apiKey:"AIzaSyBYY72CVKNDVgaEAEqibxCOHP8LDTSoH1I",authDomain:"thedatatalks-in.firebaseapp.com",databaseURL:"https://thedatatalks-in.firebaseio.com",projectId:"thedatatalks-in",storageBucket:"thedatatalks-in.appspot.com",messagingSenderId:"92831253381",appId:"1:92831253381:web:735bf765b9ea3b21ecfaec",measurementId:"G-NH1N38E537"});var m={components:{UserLogin:h}},v=Object(o.a)(m,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"page"},[e("UserLogin")],1)}),[],!1,null,null,null);e.default=v.exports}}]);